#  Customize BASH PS1 prompt to show current GIT repository and branch.
#  by Mike Stewart - http://MediaDoneRight.com

source $( dirname "${BASH_SOURCE[0]}" )/colors.sh

# Various variables you might want for your PS1 prompt instead
Time12h="\T"
Time12a="\@"
PathShort="\w"
PathFull="\W"
NewLine="\n"
Jobs="\j"
hostname="`hostname`"

# This PS1 snippet was adopted from code for MAC/BSD I saw from: http://allancraig.net/index.php?option=com_content&view=article&id=108:ps1-export-command-for-git&catid=45:general&Itemid=96
# I tweaked it to work on UBUNTU 11.04 & 11.10 plus made it mo' better

HOSTCOLOR="${IBlack}"
if [ -n "${BASHRC_PS1_HOSTCOLOR}" ]; then
    HOSTCOLOR="${BASHRC_PS1_HOSTCOLOR}"
fi

export PS1=$IBlue[$HOSTCOLOR$hostname$IBlue]$IBlue[$IPurplek$Time12h$IBlue]$Color_Off'$(git branch &>/dev/null;\
if [ $? -eq 0 ]; then \
  echo "$(echo `git status` | grep "nothing to commit" > /dev/null 2>&1; \
  if [ "$?" -eq "0" ]; then \
    # @4 - Clean repository - nothing to commit
    echo "'$Green'"$(__git_ps1 " (%s)"); \
  else \
    # @5 - Changes to working tree
    echo "'$IRed'"$(__git_ps1 " {%s}"); \
  fi) '$BYellow'$(python2 ~/bashtools/pwd.py)'$Color_Off'\$ "; \
else \
  # @2 - Prompt when not in GIT repo
  echo " '$Yellow'$(python2 ~/bashtools/pwd.py)'$Color_Off'\$ "; \
fi)'

